function confirm_deletion(s){$("#"+s).val(confirm("Select 'OK' to confirm deletion.")?"yes":"no")}function confirm_attachment(s){$("#"+s).val(confirm("Select 'OK' to confirm attaching wp_user.")?"yes":"no")}function msg_sub_deletion_not_implemented(){alert("ONLY DO THIS WHEN SUBSCRIPTION WAS COMPLETELY WRONG AND REPAIR AFTER (LIKE USE A FREE SLOT, ADJUST CHARGES, PAYMENTS, ETC.)\n\nInstructions for database:\n1) delete all muts of this subscription (make sure any valid ones (payment) get added later)\n2) delete subscription (it is wrong and should not have been created in the first place)\n3) change establishment: is_subscribed = false, gets_usr_mails = NULL, is_sponsor = NULL.")}function clear_filter(s){$("#"+s+' td.fltr>input[type="text"], #'+s+" td.fltr>select").val(""),$("#"+s+' td.head>input[type="text"], #'+s+" td.head>select").val("")}function build_fltrd_sbscrbrs_table(s){$("#sbscrbr_table td.fltr input.chk").each(function(){$(this).val($(this).val().toUpperCase())});var r="sbscrbr_login",e="pk_sbscrbr_id",t="";if(""!=$("#fltr_pk_sbscrbr_id").val()&&(r="pk_sbscrbr_id",e="",t=""),""!=$("#fltr_sbscrbr_name").val()&&(r="last",e="first",t="sbscrbr_login"),""!=$("#fltr_user_email").val()&&(r="user_email",e="sbscrbr_login",t="pk_sbscrbr_id"),""!=$("#fltr_user_registered").val()&&(r="user_registered",e="sbscrbr_login",t="pk_sbscrbr_id"),Sbscrbrs.sort(srt_by(r,e,t)),$("#sbscrbr_table").find("tr:gt(1)").remove(),""!=$("#fltr_pk_sbscrbr_id").val())var l=$("#fltr_pk_sbscrbr_id").val();if(""!=$("#fltr_sbscrbr_login").val())var a=$("#fltr_sbscrbr_login").val();if(""!=$("#fltr_sbscrbr_name").val())var b=$("#fltr_sbscrbr_name").val();if(""!=$("#fltr_user_email").val())var i=$("#fltr_user_email").val();if(""!=$("#fltr_user_registered").val())var n=$("#fltr_user_registered").val();if("y"===$("#fltr_gets_html_mail").val().toLowerCase())var c=1;else if("n"===$("#fltr_gets_html_mail").val().toLowerCase())c=0;else if("*"===$("#fltr_gets_html_mail").val())c="*";if("y"===$("#fltr_is_usr_blocked").val().toLowerCase())var _=1;else if("n"===$("#fltr_is_usr_blocked").val().toLowerCase())_=0;else if("*"===$("#fltr_is_usr_blocked").val())_="*";if(""!=$("#fltr_sbscrbr_notes").val())var o=$("#fltr_sbscrbr_notes").val();for(var d=0;d<Sbscrbrs.length;d++)if((!l||Sbscrbrs[d].pk_sbscrbr_id&&("*"==l&&Sbscrbrs[d].pk_sbscrbr_id||l&&Sbscrbrs[d].pk_sbscrbr_id.indexOf(l)>=0))&&(!a||Sbscrbrs[d].sbscrbr_login&&("*"==a&&Sbscrbrs[d].sbscrbr_login||a&&Sbscrbrs[d].sbscrbr_login.toLowerCase().indexOf(a.toLowerCase())>=0))&&(!b||(Sbscrbrs[d].first||Sbscrbrs[d].last)&&("*"==b&&(Sbscrbrs[d].first||Sbscrbrs[d].last)||b&&Sbscrbrs[d].first.toLowerCase().indexOf(b.toLowerCase())>=0||b&&Sbscrbrs[d].last.toLowerCase().indexOf(b.toLowerCase())>=0))&&(!i||Sbscrbrs[d].user_email&&("*"==i&&Sbscrbrs[d].user_email||i&&Sbscrbrs[d].user_email.toLowerCase().indexOf(i.toLowerCase())>=0))&&(!n||Sbscrbrs[d].user_registered&&("*"==n&&Sbscrbrs[d].user_registered||n&&loc(Sbscrbrs[d].user_registered).toLowerCase().indexOf(n.toLowerCase())>=0))&&(null==c||Sbscrbrs[d].gets_html_mail&&("*"==c&&Sbscrbrs[d].gets_html_mail||null!=c&&Sbscrbrs[d].gets_html_mail==c))&&(null==_||Sbscrbrs[d].is_usr_blocked&&("*"==_&&Sbscrbrs[d].is_usr_blocked||null!=_&&Sbscrbrs[d].is_usr_blocked==_))&&(!o||Sbscrbrs[d].sbscrbr_notes&&("*"==o&&Sbscrbrs[d].sbscrbr_notes||o&&Sbscrbrs[d].sbscrbr_notes.toLowerCase().indexOf(o.toLowerCase())>=0))){var u=null==Sbscrbrs[d].last||""==Sbscrbrs[d].last?"":Sbscrbrs[d].last+", ";u+=null==Sbscrbrs[d].first?"":Sbscrbrs[d].first,$("#sbscrbr_table").find("tbody").append($("<tr>").append($("<td>").text(Sbscrbrs[d].pk_sbscrbr_id).addClass("numb")).append($("<td>").text(Sbscrbrs[d].sbscrbr_login)).append($("<td>").html(escapeSpecialChars(u))).append($("<td>").html(escapeSpecialChars(Sbscrbrs[d].user_email))).append($("<td>").text(loc(Sbscrbrs[d].user_registered)))),"1"==Sbscrbrs[d].gets_html_mail?$("#sbscrbr_table tr:last").append($("<td>").text("Y").addClass("chck")):$("#sbscrbr_table tr:last").append($("<td>")),"1"==Sbscrbrs[d].is_usr_blocked?$("#sbscrbr_table tr:last").append($("<td>").text("Y").addClass("chck")):$("#sbscrbr_table tr:last").append($("<td>")),$("#sbscrbr_table tr:last").append($("<td>").html(escapeSpecialChars(Sbscrbrs[d].sbscrbr_notes))),$("#sbscrbr_table tr:last").append($("<td>").append("<input type='submit' name='"+Sbscrbrs[d].pk_sbscrbr_id+"' value='Edit'/>")),$("#sbscrbr_table tr:last td:last").append("&nbsp;<input type='submit' name='"+Sbscrbrs[d].pk_sbscrbr_id+"' value='Delete'/>")}$("#sbscrbr_table td").html().replace(/(undefined)*/g,""),$('#sbscrbr_table input[type="submit"][value="Edit"]').addClass("button-primary"),$('#sbscrbr_table input[type="submit"][value="Delete"]').addClass("button-secondary").click(function(){confirm_deletion("sure_"+s)})}function srt_by(s,r,e){return function(t,l){return!isNaN(t[s])&&!isNaN(l[s])&&parseInt(t[s])-parseInt(l[s])>0||null==t[s]&&null!=l[s]||null!=t[s]&&isNaN(t[s])&&null!=l[s]&&isNaN(l[s])&&t[s].toLowerCase()>l[s].toLowerCase()?1:!isNaN(t[s])&&!isNaN(l[s])&&parseInt(t[s])-parseInt(l[s])<0||null!=t[s]&&null==l[s]||null!=t[s]&&isNaN(t[s])&&null!=l[s]&&isNaN(l[s])&&t[s].toLowerCase()<l[s].toLowerCase()?-1:!isNaN(t[r])&&!isNaN(l[r])&&parseInt(t[r])-parseInt(l[r])>0||null==t[r]&&null!=l[r]||null!=t[r]&&isNaN(t[r])&&null!=l[r]&&isNaN(l[r])&&t[r].toLowerCase()>l[r].toLowerCase()?1:!isNaN(t[r])&&!isNaN(l[r])&&parseInt(t[r])-parseInt(l[r])<0||null!=t[r]&&null==l[r]||null!=t[r]&&isNaN(t[r])&&null!=l[r]&&isNaN(l[r])&&t[r].toLowerCase()<l[r].toLowerCase()?-1:!isNaN(t[e])&&!isNaN(l[e])&&parseInt(t[e])-parseInt(l[e])>0||null==t[e]&&null!=l[e]||null!=t[e]&&isNaN(t[e])&&null!=l[e]&&isNaN(l[e])&&t[e].toLowerCase()>l[e].toLowerCase()?1:!isNaN(t[e])&&!isNaN(l[e])&&parseInt(t[e])-parseInt(l[e])<0||null!=t[e]&&null==l[e]||null!=t[e]&&isNaN(t[e])&&null!=l[e]&&isNaN(l[e])&&t[e].toLowerCase()<l[e].toLowerCase()?-1:0}}$=jQuery;