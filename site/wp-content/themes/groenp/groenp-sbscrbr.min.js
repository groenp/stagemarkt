function validate_time_controls(e){var t=!1,s=""!=$(e).find("#break_frm").val()&&""!=$(e).find("#break_tll").val();return $(e).find("span.time").each(function(){var e=$(this);1!=e.find('input[id$="_is_closed"]').prop("checked")&&(e.removeClass("verf-err"),e.find("span.err-msg span").hide(),e.find('input.numb[id$="_hr"]').each(function(){"hh"!=$(this).val()&&(!$.isNumeric($(this).val())||$(this).val()<0||$(this).val()>23)&&(e.find('span.err-msg span[name="msg1"]').show(),e.addClass("verf-err"),t=!0)}),e.find('input.numb[id$="_min"]').each(function(){"mm"!=$(this).val()&&(!$.isNumeric($(this).val())||$(this).val()<0||$(this).val()>59)&&(e.find('span.err-msg span[name="msg1"]').show(),e.addClass("verf-err"),t=!0)}),e.find('input[id$="_frm"], input[id$="_tll"]').each(function(){":"!=$(this).val()[0]&&":"!=$(this).val()[$(this).val().length-1]||(e.find('span.err-msg span[name="msg1"]').show(),e.addClass("verf-err"),t=!0)}),parseInt(e.find('input[id$="_frm"]').val().replace(":",""))>=parseInt(e.find('input[id$="_tll"]').val().replace(":",""))&&parseInt(e.find('input[id$="_tll"]').val().replace(":",""))>500&&(e.find('span.err-msg span[name="msg2"]').show(),e.addClass("verf-err"),t=!0),s||1!=e.find('input[id$="_break"]').prop("checked")||(e.find('span.err-msg span[name="msg3"]').show(),e.addClass("verf-err"),t=!0))}),t}function remove_thumb_upload(){$("#thumbnail_url").replaceWith($("#thumbnail_url").val("").clone(!0)),$('input[name="thumbnail_remove"]').val("1"),$("span.usr-logo").hide(),$("span.std-logo").show(),Changed=!0}function add_tel_nr(){var e=parseInt($("span.tmpl.telnr select").prop("name").substr($("span.tmpl.telnr select").prop("name").length-1))+1;$("#add_telnr").before($("span.tmpl.telnr").clone(!0)),$("span.tmpl.telnr").first().removeClass("tmpl").show(),$("span.tmpl.telnr select").prop("name","fr_phone_type_id_"+e),$('span.tmpl.telnr input[type="text"]').prop("name","phone_nr_"+e),$("span.tmpl.telnr label:eq(0)").prop("for","fr_phone_type_id_"+e),align_heights("cus-my-feats")}function remove_tel_nr(e){var t=e.parentNode;t.parentNode.removeChild(t),align_heights("cus-my-feats")}function add_menu(e,t){var s=e.parentNode;if(Changed&&!confirm(Change_prmpt))return!1;Changed=!1;var a=parseInt($("div.tabpage").last().attr("id").slice(8));$(s).before($("ul.tabs li").not(".new-tab").last().clone(!0)),$(s).parent().find("li").removeClass("active-tab"),$(s).prev().attr("name","tabpage_"+a).find("a").text(t),$(s).prev().addClass("active-tab"),$("div.tabpage.tmpl").after($("div.tabpage.tmpl").clone(!0)),$("div.tabpage").hide(),$("div.tabpage.tmpl:eq(0)").removeClass("tmpl").show(),a++,renumber_tmpl_page(a);var n=$("div.tabpage").length;8==n&&$("#add_menu_button").hide()}function renumber_tmpl_page(e){$("div.tabpage.tmpl").attr("id","tabpage_"+e),$('div.tabpage.tmpl input[name="tabmrk"]').val(e),$('div.tabpage.tmpl input[type="checkbox"]').attr("name","menu"+e+$('div.tabpage.tmpl input[type="checkbox"]').attr("name").slice(5)),$('div.tabpage.tmpl input.numb, div.tabpage.tmpl span.time input[type="hidden"]').each(function(){var e=$("#cus-my-menus div.tabpage").last().attr("id").slice(8),t=$(this).attr("id").split("_")[0].length;$(this).attr("id","menu"+e+$(this).attr("id").slice(t))}),$("div.tabpage.tmpl label").not(".chk").each(function(){var e=$("#cus-my-menus div.tabpage").last().attr("id").slice(8),t=$(this).attr("for").split("_")[0].length;$(this).attr("for","menu"+e+$(this).attr("for").slice(t))}),$('div.tabpage.tmpl textarea, div.tabpage.tmpl input[type="hidden"][name^="menu"], div.tabpage.tmpl table input[type="text"]').each(function(){var e=$("#cus-my-menus div.tabpage").last().attr("id").slice(8),t=$(this).attr("name").split("_")[0].length;$(this).attr("name","menu"+e+$(this).attr("name").slice(t))});var t=$('#cus-my-menus ul.tabs li[name^="tabpage"]').length;for(i=0;i<t;i++)$('#cus-my-menus input[name="tabmrk"]:eq('+i+")").val(i)}function add_menu_section(e){var t=e.parentNode.parentNode;$(t).find("tr").last().after($(t).find("tr.tmpl").clone(!0)),$(t).find("tr.tmpl:lt(5)").removeClass("tmpl"),$(t).find("tr.tmpl textarea").each(function(){var e=$(this).attr("name").split("_");$(this).attr("name",e[0]+"_sect"+(parseInt(e[1].substring(4))+1)+"_"+e[2]+"_"+e[3])}),$(t).find('tr.tmpl input[type="text"]').each(function(){var e=$(this).attr("name").split("_");$(this).attr("name",e[0]+"_sect"+(parseInt(e[1].substring(4))+1)+"_"+e[2]+"_"+e[3]),("#"+e).length&&$(this).attr("id",e[0]+"_sect"+(parseInt(e[1].substring(4))+1)+"_"+e[2]+"_"+e[3])}),$(t).find('tr.tmpl input[type="hidden"]').each(function(){var e=$(this).attr("name").split("_");$(this).attr("name",e[0]+"_sect"+(parseInt(e[1].substring(4))+1)+"_"+e[2]+"_"+e[3]+"_"+e[4])}),$(t).find("tr.tmpl label").each(function(){var e=$(this).attr("for").split("_");$(this).attr("for",e[0]+"_sect"+(parseInt(e[1].substring(4))+1)+"_"+e[2]+"_"+e[3])}),align_heights("cus-my-menus")}function add_menu_entry(e){var t=e.parentNode.parentNode;$(t).before($(t).prev().clone(!0)),$(t).prev().find("textarea").each(function(){var e=$(this).attr("name").split("_");$(this).attr("name",e[0]+"_"+e[1]+"_item"+(parseInt(e[2].substring(4))+1)+"_"+e[3])}),$(t).prev().find('input[type="hidden"]').each(function(){var e=$(this).attr("name").split("_");$(this).attr("name",e[0]+"_"+e[1]+"_pk_item"+(parseInt(e[3].substring(4))+1)+"_"+e[4]),$(this).val("")}),align_heights("cus-my-menus")}function confirm_menu_deletion(e,t,s){var a=e.parentNode.parentNode.parentNode.parentNode;t=t.replace("%1",'"'+$('#cus-my-menus ul.tabs li[name="'+$(a).attr("id")+'"] a').text()+'"');var n=confirm(t)?"yes":"no";$(a).find('input[name="sure_'+s+'"]').val(n)}function chk_changed(e){var t=e.val(),s=InitialValues[e.attr("name")];s!=t&&(Changed=!0)}function load_flex_list(e,t,s){if($('#cus-my-feats input[id^="'+t+'"]').prop("checked",!1),void 0!==e)for(var a=0;a<e.length;a++)$("#"+t+e[a][s]).prop("checked",!0)}function load_phone_nrs(e){if($("span.telnr").first().addClass("tmpl"),$("span.telnr").not(".tmpl").remove(),$("span.telnr").first().removeClass("tmpl"),null!=e)for(var t=0;t<e.length;t++){add_tel_nr();var s=$("span.telnr").not(".tmpl").last();s.find("select").val(e[t].fr_phone_type_id).removeClass("prompt"),s.find('input[type="text"]').val(e[t].phone_nr).removeClass("prompt")}""!=$("#main_phone").val()?$("#main_phone").removeClass("prompt"):$("#main_phone").addClass("prompt"),$("span.telnr").find('input[type="text"]').each(function(){var e=$(this).val();9==e.length?e=e.substr(0,3)+" "+e.substr(3,3)+" "+e.substr(6,3):8==e.length&&(e=e.substr(0,2)+"-"+e.substr(2,2)+" "+e.substr(4,2)+" "+e.substr(6,2)),$(this).val(e)})}function clean_tabs(){var e=$("#cus-my-menus div.tabpage").length-1;for($("#add_menu_button").show(),i=1;i<e;i++)$("#cus-my-menus ul.tabs li:eq(1)").remove(),$("#cus-my-menus div.tabpage:eq(1)").remove();renumber_tmpl_page("1"),$("#cus-my-menus ul.tabs li.new-tab input").triggerHandler("click"),$("#cus-my-menus div.tabpage:eq(0)").remove(),$("#cus-my-menus ul.tabs li:eq(0)").remove()}function load_tabs(e){var t=[];for(n=0;n<e.menu.length;n++)-1==$.inArray(e.menu[n].menu_id,t)&&t.push(e.menu[n].menu_id);console.log("menus: "+t);var s=[];for(n=0;n<e.menu.length;n++)-1==$.inArray(e.menu[n].fr_lang_code,s)&&s.push(e.menu[n].fr_lang_code);$('#cus-my-menus div.tabpage:eq(0) input[name*="_menu_title_"]').val(""),$("#cus-my-menus ul.tabs li:eq(0) a").text("x");for(var a=document.getElementById("add_menu_button"),n=1;n<t.length;n++)add_menu(a,"x"),$("#cus-my-menus div.tabpage:eq("+n+') input[name*="_menu_title_"]').val("");var i=$("#sel_tab").val();""==i&&(i=0),$("#cus-my-menus ul.tabs li:eq("+i+") a").triggerHandler("click");for(n=0;n<t.length;n++)for(var r="menu"+$("#cus-my-menus div.tabpage:eq("+n+")").attr("id").split("_")[1],l=!0,p=0;p<s.length;p++){var u=$.grep(e.menu,function(e){return e.menu_id==t[n]&&e.fr_lang_code==s[p]});if(u.length>1){var d=$("#cus-my-menus div.tabpage:eq("+n+") tr.sect").length-1;for(h=d;h<u.length;h++)$("#cus-my-menus div.tabpage:eq("+n+") table+p.alone input").triggerHandler("click")}if(u.length){if(s[p]!=Lng&&"x"!=$("#cus-my-menus ul.tabs li:eq("+n+") a").text()||$("#cus-my-menus ul.tabs li:eq("+n+") a").text(u[0].menu_title),l){$('input[name="'+r+'_menu_id"]').val(u[0].menu_id),$('input[name="'+r+'_menu_frm"]').val(u[0].menu_frm),$('input[name="'+r+'_menu_tll"]').val(u[0].menu_tll);var o="1"==u[0].is_active;$('input[name="'+r+'_is_active"]').prop("checked",o),null!=u[0].menu_fr_sol&&$('input[name="'+r+'_menu_fr_sol"]').val(u[0].menu_fr_sol.replace(".",",")).trigger("blur"),null!=u[0].menu_to_sol&&$('input[name="'+r+'_menu_to_sol"]').val(u[0].menu_to_sol.replace(".",",")).trigger("blur")}$('input[name="'+r+"_pk_menu_id_"+s[p]+'"]').val(u[0].pk_menu_id),$('input[name="'+r+"_menu_title_"+s[p]+'"]').val(u[0].menu_title);for(var h=0;h<u.length;h++){$('input[name="'+r+"_sect"+h+"_name_"+s[p]+'"]').val(u[h].section_name),$('input[name="'+r+"_sect"+h+"_pk_name_"+s[p]+'"]').val(u[h].pk_section_id),l&&(null!=u[0].sect_fr_sol&&$('input[name="'+r+"_sect"+h+'_fr_sol"]').val(u[h].sect_fr_sol.replace(".",",")).trigger("blur"),null!=u[0].sect_to_sol&&$('input[name="'+r+"_sect"+h+'_to_sol"]').val(u[h].sect_to_sol.replace(".",",")).trigger("blur"));var m=$.grep(e.items,function(e){return e.fk_section_id==u[h].pk_section_id});if(m.length>1)for(var c=$("#cus-my-menus div.tabpage:eq("+n+") tr.actn-row:eq("+h+")").get(0).rowIndex-$("#cus-my-menus div.tabpage:eq("+n+") tr.sect:eq("+h+")").get(0).rowIndex-2,_=c;_<m.length;_++)$("#cus-my-menus div.tabpage:eq("+n+") tr.actn-row:eq("+h+") input").triggerHandler("click");if(m.length)for(_=0;_<m.length;_++)$('textarea[name="'+r+"_sect"+h+"_item"+_+"_"+s[p]+'"]').val(m[_].item_name),$('input[name="'+r+"_sect"+h+"_pk_item"+_+"_"+s[p]+'"]').val(m[_].pk_id)}l=!1}}$('span.time input.numb[id$="_hr"]').each(function(){$(this).val($(this).next().next().next().val().split(":")[0]).removeClass("prompt"),""==$(this).val()&&$(this).val("hh").addClass("prompt")}),$('span.time input.numb[id$="_min"]').each(function(){$(this).val($(this).next().val().split(":")[1]).removeClass("prompt"),""==$(this).val()&&$(this).val("mm").addClass("prompt")}),Changed=!1}function load_data(e){$("span").removeClass("verf-err"),$("select").val(""),$.each(e,function(e,t){var s=$("#"+e);if(null==t&&(t=""),"hidden"!=s.prop("type")&&"text"!=s.prop("type")&&"textarea"!=s.prop("type")&&"select-one"!=s.prop("type")||(s.val(t),s.trigger("change"),$('span.display-only[name="'+e+'"]').text(t)),"checkbox"==s.prop("type")){var a="1"==t;s.prop("checked",a)}if(1==s.is("span")&&(s.text(t),$('input[name="'+e+'"]').val(t),$('span[name="'+e+'"]').text(t)),null==s.prop("type")&&"radio"==$('input[name="'+e+'"]').prop("type")){var n="1"==t?"on":"";$('input[name="'+e+'"][value="'+n+'"]').prop("checked",!0)}}),$('span.time input.numb[id$="_hr"]').each(function(){$(this).val($(this).next().next().next().val().split(":")[0]).removeClass("prompt"),""==$(this).val()&&$(this).val("hh").addClass("prompt")}),$('span.time input.numb[id$="_min"]').each(function(){$(this).val($(this).next().val().split(":")[1]).removeClass("prompt"),""==$(this).val()&&$(this).val("mm").addClass("prompt")}),$('span.time input[id$="_closed"]').each(function(){1==$(this).prop("checked")?($(this).parent().find('input[type="text"], input[type="checkbox"]').prop("disabled",!0),$(this).parent().find('input[type="text"]').addClass("greyed"),$(this).parent().find('input[type="checkbox"]').css("opacity","0")):($(this).parent().find('input[type="text"], input[type="checkbox"]').prop("disabled",!1),$(this).parent().find('input[type="text"]').removeClass("greyed"),$(this).parent().find('input[type="checkbox"]').css("opacity","1"))}),$('span.date input[id$="_dd"]').each(function(){$(this).val($(this).next().next().next().next().next().val().split(" ")[0].split("-")[2]).removeClass("prompt"),""==$(this).val()&&$(this).val("dd").addClass("prompt")}),$('span.date input[id$="_mmm"]').each(function(){var e=$(this).parent().find('input[id$="_lng"]').val();if("en"==e)var t=["","JAN","FEB","MAR","APR","MAY","JUN","JUL","AUG","SEP","OCT","NOV","DEC"];if("es"==e)t=["","ENE","FEB","MAR","ABR","MAY","JUN","JUL","AGO","SET","OCT","NOV","DIC"];var s=parseInt($(this).next().next().next().val().split("-")[1]);isNaN(s)&&(s=0),$(this).val(t[s]).removeClass("prompt"),""==$(this).val()&&$(this).val("mmm").addClass("prompt")}),$('span.date input[id$="_yyyy"]').each(function(){$(this).next().val($(this).next().val().split(" ")[0]);var e=$(this).parent().find('input[id$="_lng"]').val();$(this).val($(this).next().val().split("-")[0]).removeClass("prompt"),""==$(this).val()&&"en"==e&&$(this).val("yyyy").addClass("prompt"),""==$(this).val()&&"es"==e&&$(this).val("aaaa").addClass("prompt")});var t="es"==Lng?"primer piso":"first floor",s="es"==Lng?"segundo piso":"second floor",a="es"==Lng?"tercer piso y/o superior":"third floor or higher",n="es"==Lng?"ascensor":"elevator",i="es"==Lng?"escaleras mecánicas":"escalator",r="es"==Lng?"disponible":"available",l="";null!=e.addr_street&&(l=e.addr_street),null!=e.addr_area&&(l+=""!=l?",<br />"+e.addr_area:e.addr_area),""!=l&&(l+=".<br />");var p="",u="";"1"==e["1st_floor"]&&(p="("+t),"1"==e["2nd_floor"]&&(p+=""==p?"("+s:", "+s),"1"==e["3rd_and_floor"]&&(p+=""==p?"("+a:", "+a),"1"==e.elevator&&(u+=" - "+n),"1"==e.escalator&&(u+=""==u?" - "+i:", "+i),""!=u&&(u+=" "+r),""==p&&""==u||(l+=p+u+")"),$("#cus-my-feats #address").html(l),$("span.logo-box span.std-logo img").removeClass().addClass("clip poitype"+e.poi_type_icon),null!=e.thumbnail_url&&""!=e.thumbnail_url?($("span.logo-box span.usr-logo img").attr("src",e.thumbnail_url),$("span.usr-logo").show(),$("span.std-logo").hide()):($("span.usr-logo").hide(),$("span.std-logo").show())}function edit_feat(e){!0===e?($("#cus-my-feats .edit-feat").show(),$("#cus-my-feats .rdo-feat").hide()):($("#cus-my-feats .edit-feat").hide(),$("#cus-my-feats .rdo-feat").show()),align_heights("cus-my-feats")}function show_sub_details(e){if($("#sub_details span.display-only:not(#wrn_sub_mail, #gets_no_mail)").removeClass("verf-err verf-ok"),$("#sub_details").show(),$("#subsnr").val(e),$("#subsnr_in_muts").val(e),Subs[e].pk_sub_id){var t=!0;$("#pk_sub_id").val(Subs[e].pk_sub_id)}if($("#pk_est_id").val(Subs[e].pk_est_id),$("#pk_sbscrbr_id").val(Subs[e].pk_sbscrbr_id),$("#sbscrbr_login").text(Subs[e].sbscrbr_login),"1"==Subs[e].is_usr_blocked?$("#is_usr_blocked").text("Yes").addClass("verf-err"):$("#is_usr_blocked").text("No"),null==Subs[e].fr_ID?($("#gets_no_mail").show(),$("#gets_sub_mails").hide(),$("#wrn_sub_mail").hide()):($("#gets_no_mail").hide(),"1"===Subs[e].gets_sub_mails?($("#wrn_sub_mail").hide(),$("#gets_sub_mails").show()):($("#wrn_sub_mail").show(),$("#gets_sub_mails").hide())),$("#poi_shrt_name").html(escapeSpecialChars(Subs[e].poi_shrt_name)),$("#fk_poi_type_id").text(Subs[e].fk_poi_type_id),$("#sbscrbr_notes").html(escapeSpecialChars(Subs[e].sbscrbr_notes)),t){if($("#sub_details .has_sub").show(),$("#sub_details .no_sub").hide(),$("#subtype_name").html(escapeSpecialChars(Subs[e].subtype_name)),$("#sub_strt_date").html(loc(Subs[e].sub_strt_date)),null==Subs[e].sub_end_date)txt="es"==Lng?"Activo":"Active",$("#sub_details .act_sub").show(),$("#sub_details .old_sub").hide(),$("#sub_end_date").text(txt).addClass("verf-ok"),"1"==Subs[e].must_end_eop?($("#sub_end_date").text(calc_eop(Subs[e].sub_strt_date,Subs[e].sub_cycle,!0)),$("#eop_button").prop("value","Revert scheduled cancellation")):$("#eop_button").prop("value","End subscription at end of cycle");else{$("#sub_details .old_sub").show(),$("#sub_details .act_sub").hide(),$("#sub_end_date").html(loc(Subs[e].sub_end_date)),null!=Subs[e].sub_final_bal?Subs[e].sub_final_bal>=0?$("#sub_final_bal").text("S/. "+amount(Subs[e].sub_final_bal)).addClass("verf-ok"):$("#sub_final_bal").text("S/. "+amount(Subs[e].sub_final_bal)+" DUE").addClass("verf-err"):$("#sub_final_bal").html("&nbsp;");var s=$('#sub_details input[type="submit"][value="Reinstate subscription"]').prop("name");if(null!=Subs[e].sub_bundle_id){var a=[];a=Subs.filter(function(t){return t.sub_bundle_id==Subs[e].sub_bundle_id&&null==t.sub_end_date}),a.length>0&&a.length<Subs[e].num_of_est&&(main_sub=a.filter(function(e){return null==e.ref_sub_id}),s+="bundle"+main_sub[0].pk_sub_id,$('#sub_details input[type="submit"][value="Reinstate subscription"]').prop("name",s))}}"1"==Subs[e].is_usr_blocked&&$("#sub_details .not_blocked").hide();for(var n=Subs[e].fk_subtype_id,i=0;i<SubTypes.length;i++)if(SubTypes[i].pk_subtype_id==n){n=i;break}var r="es"==Lng?" por ":" per ",l="es"==Lng?" mes(es)":" month(s)",p="es"==Lng?" establicimiento(s)":" establishment(s)",u="es"==Lng?"% sobre el(los) primer ":"% over the first ",d="es"==Lng?" período(s)":" period(s)",o="es"==Lng?" después de la expiración del período.":" after expiry of period.",h="es"==Lng?". Período de gracia: ":". Grace period: ",m="es"==Lng?" mes(es) después del inicio del período.":" month(s) after the start of the period.",c="es"==Lng?"<br />La multa se calcula cada ":"<br />Penalty calculated every ",_="es"==Lng?"mes(es).":" month(s).",f="es"==Lng?"% sobre el importe debido":"% over amount due",v="es"==Lng?"Si":"Yes",b=(Lng,"No");if($("#sub_amount").text("S/. "+amount(Subs[e].sub_amount)+r+SubTypes[n].sub_cycle+l),$("#num_of_est").text(SubTypes[n].num_of_est+p),SubTypes[n].discount_perc&&"0"!=Subs[e].is_1st_subtype?$("#discount").text(amount(SubTypes[n].discount_perc)+u+SubTypes[n].disc_paycycles+d):$(".discount").hide(),SubTypes[n].penalty_perc){var g=SubTypes[n].penalty_start==SubTypes[n].sub_cycle?o:h+SubTypes[n].penalty_start+m,y=SubTypes[n].penalty_repeat==SubTypes[n].sub_cycle?"":c+SubTypes[n].penalty_repeat+_;$("#penalty").html(amount(SubTypes[n].penalty_perc)+f+g+y),$("#min_pen_bal").text("S/. "+SubTypes[n].min_pen_bal)}else $(".penalty").hide();"1"==SubTypes[n].sponsorship?$("#sponsorship").text(v).addClass("verf-ok"):$("#sponsorship").text(b)}else{var x="es"==Lng?"Ninguna":"None";$("#sub_details .has_sub").hide(),$("#sub_details .no_sub").show(),"1"==Subs[e].is_usr_blocked&&$("#sub_details .not_blocked").hide(),$("#subtype_name").text(x).addClass("verf-err")}$("#pk_subtype_id option.list-dvdr").remove(),$('#pk_subtype_id option[value*="b"]').remove(),$("#sub_details .bundle").remove(),$("#sub_details .grp-top").removeClass("grp-top");a=[];a=Subs.filter(function(e){return e.pk_sbscrbr_id==$("#pk_sbscrbr_id").val()&&null==e.ref_sub_id&&null!=e.sub_bundle_id&&null==e.sub_end_date});for(i=a.length-1;i>=0;i--)chk_bundle=Subs.filter(function(e){return e.pk_sbscrbr_id==$("#pk_sbscrbr_id").val()&&e.sub_bundle_id==a[i].sub_bundle_id&&null==e.sub_end_date}),chk_bundle.length>=a[i].num_of_est?a.splice(i,1):a[i].fk_subtype_id&&a[i].fk_subtype_id==Subs[e].fk_subtype_id&&null==Subs[e].ref_sub_id&&a.splice(i,1);if(0!=a.length){$("#pk_subtype_id option:first").after("<option value='' class='list-dvdr' disabled='disabled'>Standard subscriptions:</option>");for(i=0;i<a.length;i++)$("#pk_subtype_id option:first").after("<option value='"+a[i].fk_subtype_id+"b"+a[i].pk_sub_id+"'>"+a[i].subtype_name+"</option>");$("#pk_subtype_id option:first").after("<option value='' class='list-dvdr' disabled='disabled'>Free slot(s):</option>")}if(null==Subs[e].sub_end_date){var C=[];C=Subs.filter(function(t){return null!=t.sub_bundle_id&&null==t.sub_end_date&&t.sub_bundle_id==Subs[e].sub_bundle_id&&t.pk_sub_id!=Subs[e].pk_sub_id});for(i=0;i<C.length;i++)C.length>0&&0==i?($("#poi_shrt_name").after("<label class='bundle grp-btm'></label><span class='bundle '>"+C[i].fk_poi_type_id+"</span><span class='bundle display-only grp-btm'>"+C[i].poi_shrt_name+"</span>"),$('#poi_shrt_name, #sub_details label[for="poi_shrt_name"]').addClass("grp-top")):$("#poi_shrt_name").after("<label class='bundle'></label><span class='bundle'>"+C[i].fk_poi_type_id+"</span><span class='bundle display-only'>"+C[i].poi_shrt_name+"</span>")}$("html, body").animate({scrollTop:$("#sub_details").offset().top-40},700)}function align_heights(e){$("#"+e).css("min-height",500),$("#cus-task-menu").css("min-height",500);var t=$("#"+e+" p.button-row").length?$("#"+e+" p.button-row").height()+parseInt($("#"+e+" p.button-row").css("padding-top"))+parseInt($("#"+e+" p.button-row").css("padding-bottom"))+10:10;$("#"+e).height()+t<$("#cus-task-menu").height()?$("#"+e).css("min-height",$("#cus-task-menu").height()):$("#"+e).height()+t>$("#cus-task-menu").height()&&($("#"+e).css("min-height",$("#"+e).height()+t),$("#cus-task-menu").css("min-height",$("#"+e).height()))}function loc(e){if(null!=e){var t=new Date(e.replace(" ","T")+TZsrvr).toString().split("GMT")[0];return t}return""}function goto(e){$("html, body").animate({scrollTop:$('a[name="add_'+e+'"]').offset().top-40},700)}function amount(e){return""==e||null==e?"":parseFloat(e).toFixed(2).toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")}$=jQuery;var InitialValues=[],Changed=!1;$(document).ready(function(e){if(e("#cus-est-details-mb").length)var t="es"==Lng?"La información de este Establicimiento a sido cargada.":"Establishment data has been loaded.",s="es"==Lng?"No hay información de este Establicimiento para cargar.":"There is no establishment data to be loaded.",a="es"==Lng?" - Todos los establecimientos":" - All establishments";e("#cus-est-details-mb div.handlediv").hide(),e("#cus-est-details-mb").removeClass("closed"),e("#cus-est-details-mb").click(function(){jQuery(this).removeClass("closed")}),e("#cus-est-details-mb div.multipage").hide(),e("#cus-task-menu a").click(function(){if(e("p.gen").remove(),Changed&&!confirm(Change_prmpt))return!1;Changed=!1,e("#cus-task-menu a").removeClass("menu-hl"),e("#cus-task-menu a").hover(function(){e(this).addClass("menu-hl")},function(){e(this).removeClass("menu-hl")}),e(this).hover(function(){e(this).addClass("menu-hl")},function(){e(this).addClass("menu-hl")}),e(this).addClass("menu-hl"),e("#cus-est-details-mb div.multipage").hide(),e(e(this).attr("href")).show();var n=e(this).attr("data-id");if(e('input[name="bkmrk"]').val(this.className.split(" ")[0]+"%"+n),e(this).hasClass("bill")&&(e("#bill_title").text(" - "+e(this).text()),e("#sub_details").show(),show_sub_details(n)),e(this).hasClass("bill_all")&&(e("#bill_title").text(a),e("#sub_details").hide()),e(this).hasClass("bill")||e(this).hasClass("bill_all")){e("#loader").show(),e("#muts").hide(),align_heights("cus-my-billing"),e("#loader").css("height",e("#cus-my-billing").height()-36),e(this).attr("data-id")?id=e(this).attr("data-id"):id="all";var i=e(this).attr("data-user"),r=e(this).attr("data-nonce");e.ajax({type:"post",dataType:"json",url:cusconowAsync.ajaxurl,data:{action:"cusconow_get_muts",id:id,user:i,nonce:r},success:function(t){if(e("#loader").hide(),e("#muts").show(),"success"==t.type)e("#muts div").html(t.html);else{var s="es"==Lng?"No se pudo recuperar los datos.":"Failed to retrieve data.";e("#muts div").html("<p class='err-msg'>"+s+"</p>")}align_heights("cus-my-billing")}})}return e(this).hasClass("feat")&&(e("#feat_title").text(e(this).parent().parent().prev().text()+" - "),e(".edit-feat").hide(),e(".rdo-feat").show(),e("#loader").show(),-1==Hospitality.indexOf(Subs[e(this).attr("data-id")].fk_poi_type_id)?e("#cus-my-feats .hospitality").hide():e("#cus-my-feats .hospitality").show(),-1==Bar_feat.indexOf(Subs[e(this).attr("data-id")].fk_poi_type_id)?e("#cus-my-feats .bar-feat").hide():e("#cus-my-feats .bar-feat").show(),-1==Rest_feat.indexOf(Subs[e(this).attr("data-id")].fk_poi_type_id)?e("#cus-my-feats .rest-feat").hide():e("#cus-my-feats .rest-feat").show(),align_heights("cus-my-feats"),e("#loader").css("height",e("#cus-my-feats").height()-36),e(this).attr("data-id")?id=e(this).attr("data-id"):id="all",i=e(this).attr("data-user"),r=e(this).attr("data-nonce"),e.ajax({type:"post",dataType:"json",url:cusconowAsync.ajaxurl,data:{action:"cusconow_get_feats",id:id,user:i,nonce:r},success:function(a){e("#loader").hide(),"success"==a.type?(1==a.data.is_allwd_feat||"undefined"!=typeof Sbscrbrs?(e(".edit-feat").show(),e(".rdo-feat").hide(),e("#cus-my-feats input, #cus-my-feats select").prop("disabled",!1),e("#cus-my-feats select").show()):(e(".edit-feat").hide(),e(".rdo-feat").show()),load_data(a.data),load_phone_nrs(a.phone_nrs),load_flex_list(a.ccs,"cc_","fr_cc_id"),load_flex_list(a.atmos,"atmos_","fr_atmosph_id"),load_flex_list(a.cuisines,"cuisine_","fr_cuisine_id"),1==a.data.is_allwd_feat||"undefined"!=typeof Sbscrbrs||(e("#cus-my-feats input, #cus-my-feats select").prop("disabled",!0),e("#cus-my-feats select").filter(function(){return!this.value}).hide()),InitialValues=[],e.each(e("#cus-my-feats form").serializeArray(),function(){InitialValues[this.name]=this.value}),e("#cus-my-feats form").prepend("<p class='gen fbk-msg'>"+t+"</p>")):e("#cus-my-feats form").prepend("<p class='gen err-msg'>"+s+"</p>"),align_heights("cus-my-feats")}})),e(this).hasClass("hour")&&(e("#hour_title").text(e(this).parent().parent().prev().text()+" - "),e("#loader").show(),align_heights("cus-my-hours"),e("#loader").css("height",e("#cus-my-hours").height()-36),e(this).attr("data-id")?id=e(this).attr("data-id"):id="all",i=e(this).attr("data-user"),r=e(this).attr("data-nonce"),e.ajax({type:"post",dataType:"json",url:cusconowAsync.ajaxurl,data:{action:"cusconow_get_hours",id:id,user:i,nonce:r},success:function(a){e("#loader").hide(),"success"==a.type?(load_data(a.data),InitialValues=[],e.each(e("#cus-my-hours form").serializeArray(),function(){InitialValues[this.name]=this.value}),e("#cus-my-hours form").prepend("<p class='gen fbk-msg'>"+t+"</p>")):e("#cus-my-hours form").prepend("<p class='gen err-msg'>"+s+"</p>"),align_heights("cus-my-hours")}})),e(this).hasClass("menu")&&(e("#menu_title").text(e(this).parent().parent().prev().text()+" - "),e("#loader").show(),align_heights("cus-my-menus"),e("#loader").css("height",e("#cus-my-menus").height()-36),e(this).attr("data-id")?id=e(this).attr("data-id"):id="all",i=e(this).attr("data-user"),r=e(this).attr("data-nonce"),e.ajax({type:"post",dataType:"json",url:cusconowAsync.ajaxurl,data:{action:"cusconow_get_menus",id:id,user:i,nonce:r},success:function(a){e("#loader").hide(),clean_tabs(),"success"==a.type?(load_tabs(a.data),InitialValues=[],e.each(e("#cus-my-menus form").serializeArray(),function(){InitialValues[this.name]=this.value}),e("#cus-my-menus ul.tabs").prepend("<p class='gen fbk-msg'>"+t+"</p>")):e("#cus-my-menus ul.tabs").prepend("<p class='gen err-msg'>"+s+"</p>"),align_heights("cus-my-menus")}})),!1}),e("a.menu-hl").triggerHandler("click"),e('span.time input.numb[id$="_hr"]').focus(function(){"hh"==e(this).val()&&e(this).val("").removeClass("prompt")}),e('span.time input.numb[id$="_hr"]').blur(function(){var t=null!=e(this).next().next().next().val().split(":")[1]&&"mm"!=e(this).next().next().next().val().split(":")[1]?e(this).next().next().next().val().split(":")[1]:"",s=1==e(this).val().length?"0"+e(this).val():e(this).val();e(this).val(s),""!=s&&"hh"!=s||e(this).val("hh").addClass("prompt"),""==s&&""==t?e(this).next().next().next().val(""):e(this).next().next().next().val(s+":"+t),chk_changed(e(this).next().next().next())}),e('span.time input.numb[id$="_min"]').focus(function(){"mm"==e(this).val()&&e(this).val("").removeClass("prompt")}),e('span.time input.numb[id$="_min"]').blur(function(){var t="hh"!=e(this).next().val().split(":")[0]?e(this).next().val().split(":")[0]:"",s=1==e(this).val().length?"0"+e(this).val():e(this).val();e(this).val(s),""!=s&&"mm"!=s||e(this).val("mm").addClass("prompt"),""==s&&""==t?e(this).next().val(""):e(this).next().val(t+":"+s),chk_changed(e(this).next())}),e('span.time input[type="radio"]').change(function(){1==e(this).prop("checked")&&e(this).prop("id").indexOf("_closed")>0?(e(this).parent().find('input[type="text"], input[type="checkbox"]').prop("disabled",!0),e(this).parent().find('input[type="text"]').addClass("greyed"),e(this).parent().find('input[type="checkbox"]').css("opacity","0")):(e(this).parent().find('input[type="text"], input[type="checkbox"]').prop("disabled",!1),e(this).parent().find('input[type="text"]').removeClass("greyed"),e(this).parent().find('input[type="checkbox"]').css("opacity","1")),Changed=!0}),e('span.date input[id$="_dd"]').focus(function(){"dd"==e(this).val()&&e(this).val("").removeClass("prompt")}),e('span.date input[id$="_dd"]').blur(function(){var t=e(this).next().next().next().next().next().val().split(" ")[0];t=null!=t.split("-")[1]?t.split("-")[0]+"-"+t.split("-")[1]:"-";var s=1==e(this).val().length?"0"+e(this).val():e(this).val();e(this).val(s),""!=s&&"dd"!=s||e(this).val("dd").addClass("prompt"),""==s&&"-"==t?e(this).next().next().next().next().next().val(""):e(this).next().next().next().next().next().val(t+"-"+s),chk_changed(e(this).next().next().next().next().next())}),e('span.date input[id$="_mmm"]').focus(function(){"mmm"==e(this).val()&&e(this).val("").removeClass("prompt")}),e('span.date input[id$="_mmm"]').blur(function(){var t=e(this).parent().find('input[id$="_lng"]').val(),s=e(this).next().next().next().val().split(" ")[0],a=e(this).val().toUpperCase(),n=["","JAN","FEB","MAR","APR","MAY","JUN","JUL","AUG","SEP","OCT","NOV","DEC","ENE","FEB","MAR","ABR","MAY","JUN","JUL","AGO","SET","OCT","NOV","DIC"],i=n.indexOf(a);"es"==t&&i>0&&i<13&&(i+=12),"en"==t&&i>12&&(i-=12),e(this).val(n[i]),a=-1==i?"":""+i%12,0==i&&(a=""),"0"===a&&(a="12"),a=1==a.length?"0"+a:a;var r=s.split("-")[0],l=null!=s.split("-")[2]?s.split("-")[2]:"";""!=a&&"mmm"!=a||e(this).val("mmm").addClass("prompt"),""==a&&""==r&&""==l?e(this).next().next().next().val(""):e(this).next().next().next().val(r+"-"+a+"-"+l),chk_changed(e(this).next().next().next())}),e('span.date input[id$="_yyyy"]').focus(function(){"aaaa"!=e(this).val()&&"yyyy"!=e(this).val()||e(this).val("").removeClass("prompt")}),e('span.date input[id$="_yyyy"]').blur(function(){var t=e(this).parent().find('input[id$="_lng"]').val(),s=e(this).next().val().split(" ")[0];s=null!=s.split("-")[1]?s.split("-")[1]+"-"+s.split("-")[2]:"-";var a=2==e(this).val().length?"20"+e(this).val():e(this).val();e(this).val(a),""!=a&&"yyyy"!=a||"en"!=t||e(this).val("yyyy").addClass("prompt"),""!=a&&"aaaa"!=a||"es"!=t||e(this).val("aaaa").addClass("prompt"),""==a&&"-"==s?e(this).next().val(""):e(this).next().val(a+"-"+s),chk_changed(e(this).next())}),e('span.telnr input[type="text"]').focus(function(){"### ### ###"!=e(this).val()&&"84-## ## ##"!=e(this).val()&&""!=e(this).val()||e(this).val("").removeClass("prompt")}),e('span.telnr input[type="text"]').blur(function(){"### ### ###"==e(this).val()||"84-## ## ##"==e(this).val()||""==e(this).val()?"1"==e(this).parent().prev().find("option:selected").data("mobile")?e(this).val("### ### ###").addClass("prompt"):e(this).val("84-## ## ##").addClass("prompt"):e(this).removeClass("prompt")}),e('span.telnr input[name="main_phone"]').blur(function(){"### ### ###"!=e(this).val()&&"84-## ## ##"!=e(this).val()&&""!=e(this).val()&&""!=e(this).parent().prev().val()?e("#add_telnr").prop("disabled",!1):e("#add_telnr").prop("disabled",!0)}),e("span.telnr select").change(function(){""!=e(this).val()?(e(this).next().find("input").prop("disabled",!1).removeClass("greyed"),"### ### ###"==e(this).next().find("input").val()||"84-## ## ##"==e(this).next().find("input").val()||""==e(this).next().find("input").val()?"1"==e(this).find("option:selected").data("mobile")?e(this).next().find("input").val("### ### ###"):"0"==e(this).find("option:selected").data("mobile")?e(this).next().find("input").val("84-## ## ##"):e(this).next().find("input").val(""):"fr_phone_type_id"==e(this).prop("name")&&e("#add_telnr").prop("disabled",!1),e(this).removeClass("prompt")):(e(this).next().find("input").prop("disabled",!0).addClass("greyed"),e(this).addClass("prompt"),"fr_phone_type_id"==e(this).prop("name")&&e("#add_telnr").prop("disabled",!0))}),e("span.telnr select").blur(function(){chk_changed(e(this))}),e("span.prc_rnge input").focus(function(){
"###,##"==e(this).val()&&e(this).val("").removeClass("prompt")}),e("span.prc_rnge input").blur(function(){var t=e(this).val().toString().replace(/[^0-9\.,]/g,""),s=t.lastIndexOf(",")>t.lastIndexOf(".")?t.lastIndexOf(","):t.lastIndexOf("."),a="";s>-1&&(a=t.substring(s+1).substring(0,2),t=t.substring(0,s)),t=t.replace(/[\.,]/g,""),""==a&&(a="00"),1==a.length&&(a+="0"),""==t&&(t="0"),t=t+","+a,e(this).val(t).removeClass("prompt"),"0,00"!=t&&"###,##"!=t||e(this).val("###,##").addClass("prompt"),chk_changed(e(this))}),e("#thumbnail_url").change(function(){if(this.files&&this.files[0]){var t=new FileReader;t.onload=function(t){e("span.logo-box span.usr-logo img").attr("src",t.target.result),e('input[name="thumbnail_remove"]').val("")},t.readAsDataURL(this.files[0]),e("span.usr-logo").show(),e("div.std-logo").hide()}else e("span.usr-logo").hide(),e("div.std-logo").show();Changed=!0}),e('#cus-my-menus input[name*="_title_"]').blur(function(){var t=e(this).attr("name").slice(-2);if(Lng==t)if(""!=e(this).val())e("li.active-tab a").text(e(this).val());else{var s=e(this).parent().parent().find("input").not("[name$="+t+"]");""!=s.val()&&e("li.active-tab a").text(s.val())}}),e("textarea").blur(function(){chk_changed(e(this))}),e('input[type="checkbox"]').change(function(){Changed=!0}),e('#cus-my-feats input[type="text"], #cus-my-menus input[type="text"]').blur(function(){chk_changed(e(this))}),e("ul.tabs li a").click(function(){if(Changed&&!confirm(Change_prmpt))return!1;Changed=!1,e(this).parent().parent().find("li").removeClass("active-tab"),e(this).parent().addClass("active-tab");var t=e(this).parent().attr("name");e("div.tabpage").hide(),e('div.tabpage[id="'+t+'"]').show(),align_heights("cus-my-menus")}),e('#cus-my-feats input[name^="save"]').click(function(t){var s=!1;e("#cus-my-feats form p.err-msg, #cus-my-feats form p.fbk-msg").remove(),e("#cus-my-feats span.telnr").removeClass("verf-err"),e("#cus-my-feats span.telnr").find("span.err-msg span").hide();var a=e("#cus-my-feats span.telnr select").filter(function(){return this.value}).length;if(""==e("#fr_phone_type_id").val()&&a>0){var n=e("#cus-my-feats span.telnr").first();n.find('span.err-msg span[name="msg3"]').show(),n.addClass("verf-err"),s=!0}if(e("#cus-my-feats span.telnr").each(function(){var t=e(this);if(""!=t.find("select").val()){var a=t.find("option:selected").data("mobile"),n=t.find('input[type="text"]').val().replace(/[\s\-]/g,""),i=/^\d+$/.test(n);8==n.length&&i&&"0"!=n[0]||"0"!=a?9==n.length&&i&&"0"!=n[0]||"1"!=a||(t.find('span.err-msg span[name="msg2"]').show(),t.addClass("verf-err"),s=!0):(t.find('span.err-msg span[name="msg1"]').show(),t.addClass("verf-err"),s=!0)}}),align_heights("cus-my-feats"),s)return e("html, body").animate({scrollTop:e(this).parent().parent().parent().find(".verf-err:eq(0)").offset().top-40},700),!1;e("#loader").show(),e("#loader").css("height",e("#cus-my-feats").height()-36)}),e('#cus-my-hours input[name^="save"]').click(function(t){var s=!1,a=e(this).parent().parent();if(e("#cus-my-hours form p.err-msg, #cus-my-hours form p.fbk-msg").remove(),validate_time_controls(a)&&(s=!0),e(a).find("span.date").each(function(){var t=e(this);t.removeClass("verf-err"),t.find("span.err-msg span").hide();var a=t.find('input[id$="_dd"]').val();"dd"!=a&&(!e.isNumeric(a)||a<1||a>31)&&(t.find('span.err-msg span[name="msg1"]').show(),t.addClass("verf-err"),s=!0);t.find('input[id$="_yyyy"]').val();t.find('input[id$="_yyyy"]').each(function(){"yyyy"!=e(this).val()&&"aaaa"!=e(this).val()&&(!e.isNumeric(e(this).val())||e(this).val()<2e3||e(this).val()>2099)&&(t.find('span.err-msg span[name="msg1"]').show(),t.addClass("verf-err"),s=!0)});var n=t.find('input[type="hidden"][name]').val().split(" ")[0];if(""!=n){"-"!=n[0]&&-1==n.indexOf("--")&&"-"!=n[n.length-1]||(t.find('span.err-msg span[name="msg1"]').show(),t.addClass("verf-err"),s=!0);var i=n.split("-"),r=new Date(i[0],i[1]-1,i[2]);r.getFullYear()==i[0]&&r.getMonth()+1==i[1]&&r.getDate()==Number(i[2])||(t.find('span.err-msg span[name="msg2"]').show(),t.addClass("verf-err"),s=!0);var l=new Date((new Date).setHours((new Date).getHours()+parseInt(TZsrvr))),p=new Date(n);1==t.find('input[id$="_future"]').val()&&p<l&&(t.find('span.err-msg span[name="msg3"]').show(),t.addClass("verf-err"),s=!0);var u=t.find('input[id$="_dateid"]').val(),d=parseInt(t.find('input[id$="_num_days"]').val());if(""!=u&&!isNaN(d))var o=e("#"+u).val();if(o&&""!=o){var h=new Date(o),m=new Date(o);m.setDate(h.getDate()+d),(d>=0&&(h>p||m<p)||d<0&&(m>=p||h<=p))&&(t.find('span.err-msg span[name="msg4"]').show(),t.addClass("verf-err"),s=!0)}}}),align_heights("cus-my-hours"),s)return e("html, body").animate({scrollTop:e(a).find(".verf-err:eq(0)").offset().top-40},700),!1;e("#loader").show(),e("#loader").css("height",e("#cus-my-hours").height()-36)}),e('#cus-my-menus input[name^="save"]').click(function(t){var s=!1,a=e(this).parent().parent().parent();e("#cus-my-menus  p.err-msg, #cus-my-menus p.fbk-msg").remove(),e(a).find(".global-err").removeClass("verf-err").hide(),e(a).find("table.editform .verf-err").removeClass("verf-err"),e(a).find("table.editform span.err-msg span").hide(),validate_time_controls(a)&&(s=!0),e(a).find("span.prc_rnge").each(function(){var t=e(this);t.removeClass("verf-err"),t.find("span.err-msg span").hide(),t.find("input").each(function(){var a=parseFloat(e(this).val().replace(",","."));!isNaN(a)&&(a<0||a>=1e3)&&(t.find('span.err-msg span[name="msg1"]').show(),t.addClass("verf-err"),s=!0)});var a=parseFloat(t.find("input:eq(0)").val().replace(",",".")),n=parseFloat(t.find("input:eq(1)").val().replace(",","."));!isNaN(a)&&!isNaN(n)&&a>=n&&(t.find('span.err-msg span[name="msg2"]').show(),t.addClass("verf-err"),s=!0)});var n="";if(e(a).find('input[name*="title"]').not(".tmpl").each(function(){var t=[],a=e(this).attr("name").split("_").pop();if(n+=e(this).val(),""!=e(this).val()){e(this).parent().parent().parent().find('tr.sect input:visible[name$="'+a+'"]').each(function(){t[t.length]=e(this).val()}),t=t.sort();for(var i=0;i<t.length-1;i++)if(t[i+1]==t[i]&&""!=t[i]){e(this).parent().parent().parent().find("tr.sect").not(".tmpl").addClass("verf-err"),e(this).parent().parent().parent().parent().parent().find(".err1").addClass("verf-err").show(),s=!0;break}}else e(this).parent().parent().parent().find('tr:not(.tmpl .title) input:visible[name$="'+a+'"], tr:not(.tmpl) textarea[name$="'+a+'"]').each(function(){""!=e(this).val()&&(e(this).parent().addClass("verf-err"),e(this).parent().find('span[name="err5"]').show(),s=!0,e(this).parent().parent().parent().parent().parent().find(".err2").addClass("verf-err").show())})}),""==n&&(e(this).parent().parent().find("tr.title").not(".tmpl").addClass("verf-err"),e(this).parent().parent().find(".err3").addClass("verf-err").show(),e(this).parent().parent().find(".err2").removeClass("verf-err").hide(),s=!0),align_heights("cus-my-menus"),s)return e("html, body").animate({scrollTop:e(a).parent().find(".verf-err:eq(0)").offset().top-40},700),!1;e("#loader").show(),e("#loader").css("height",e("#cus-my-menus").height()-36)})}),"undefined"==typeof escapeSpecialChars&&(escapeSpecialChars=function(e){return null==e?"":e.replace(/[\'\"<>\&]/g,function(e){return"&"+(escapeSpecialChars.entityTable[e.charCodeAt(0)]||"#"+e.charCodeAt(0))+";"})},escapeSpecialChars.entityTable={34:"quot",38:"amp",39:"#039",60:"lt",62:"gt"}),"undefined"==typeof escapeHtmlEntities&&(escapeHtmlEntities=function(e){return e.replace(/[\u00A0-\u2666\'\"<>\&]/g,function(e){return"&"+(escapeHtmlEntities.entityTable[e.charCodeAt(0)]||"#"+e.charCodeAt(0))+";"})},escapeHtmlEntities.entityTable={34:"#034",38:"amp",39:"#039",60:"lt",62:"gt",160:"nbsp",161:"iexcl",162:"cent",163:"pound",164:"curren",165:"yen",166:"brvbar",167:"sect",168:"uml",169:"copy",170:"ordf",171:"laquo",172:"not",173:"shy",174:"reg",175:"macr",176:"deg",177:"plusmn",178:"sup2",179:"sup3",180:"acute",181:"micro",182:"para",183:"middot",184:"cedil",185:"sup1",186:"ordm",187:"raquo",188:"frac14",189:"frac12",190:"frac34",191:"iquest",192:"Agrave",193:"Aacute",194:"Acirc",195:"Atilde",196:"Auml",197:"Aring",198:"AElig",199:"Ccedil",200:"Egrave",201:"Eacute",202:"Ecirc",203:"Euml",204:"Igrave",205:"Iacute",206:"Icirc",207:"Iuml",208:"ETH",209:"Ntilde",210:"Ograve",211:"Oacute",212:"Ocirc",213:"Otilde",214:"Ouml",215:"times",216:"Oslash",217:"Ugrave",218:"Uacute",219:"Ucirc",220:"Uuml",221:"Yacute",222:"THORN",223:"szlig",224:"agrave",225:"aacute",226:"acirc",227:"atilde",228:"auml",229:"aring",230:"aelig",231:"ccedil",232:"egrave",233:"eacute",234:"ecirc",235:"euml",236:"igrave",237:"iacute",238:"icirc",239:"iuml",240:"eth",241:"ntilde",242:"ograve",243:"oacute",244:"ocirc",245:"otilde",246:"ouml",247:"divide",248:"oslash",249:"ugrave",250:"uacute",251:"ucirc",252:"uuml",253:"yacute",254:"thorn",255:"yuml",402:"fnof",913:"Alpha",914:"Beta",915:"Gamma",916:"Delta",917:"Epsilon",918:"Zeta",919:"Eta",920:"Theta",921:"Iota",922:"Kappa",923:"Lambda",924:"Mu",925:"Nu",926:"Xi",927:"Omicron",928:"Pi",929:"Rho",931:"Sigma",932:"Tau",933:"Upsilon",934:"Phi",935:"Chi",936:"Psi",937:"Omega",945:"alpha",946:"beta",947:"gamma",948:"delta",949:"epsilon",950:"zeta",951:"eta",952:"theta",953:"iota",954:"kappa",955:"lambda",956:"mu",957:"nu",958:"xi",959:"omicron",960:"pi",961:"rho",962:"sigmaf",963:"sigma",964:"tau",965:"upsilon",966:"phi",967:"chi",968:"psi",969:"omega",977:"thetasym",978:"upsih",982:"piv",8226:"bull",8230:"hellip",8242:"prime",8243:"Prime",8254:"oline",8260:"frasl",8472:"weierp",8465:"image",8476:"real",8482:"trade",8501:"alefsym",8592:"larr",8593:"uarr",8594:"rarr",8595:"darr",8596:"harr",8629:"crarr",8656:"lArr",8657:"uArr",8658:"rArr",8659:"dArr",8660:"hArr",8704:"forall",8706:"part",8707:"exist",8709:"empty",8711:"nabla",8712:"isin",8713:"notin",8715:"ni",8719:"prod",8721:"sum",8722:"minus",8727:"lowast",8730:"radic",8733:"prop",8734:"infin",8736:"ang",8743:"and",8744:"or",8745:"cap",8746:"cup",8747:"int",8756:"there4",8764:"sim",8773:"cong",8776:"asymp",8800:"ne",8801:"equiv",8804:"le",8805:"ge",8834:"sub",8835:"sup",8836:"nsub",8838:"sube",8839:"supe",8853:"oplus",8855:"otimes",8869:"perp",8901:"sdot",8968:"lceil",8969:"rceil",8970:"lfloor",8971:"rfloor",9001:"lang",9002:"rang",9674:"loz",9824:"spades",9827:"clubs",9829:"hearts",9830:"diams",338:"OElig",339:"oelig",352:"Scaron",353:"scaron",376:"Yuml",710:"circ",732:"tilde",8194:"ensp",8195:"emsp",8201:"thinsp",8204:"zwnj",8205:"zwj",8206:"lrm",8207:"rlm",8211:"ndash",8212:"mdash",8216:"lsquo",8217:"rsquo",8218:"sbquo",8220:"ldquo",8221:"rdquo",8222:"bdquo",8224:"dagger",8225:"Dagger",8240:"permil",8249:"lsaquo",8250:"rsaquo",8364:"euro"});